<html lang="en">
  <%- include("./partials/head.ejs") %>

  <body>
    <%- include("./partials/nav.ejs") %>
    <nav class="filter">
  <ul>
    <li><a href="/sort">Highest</a></li>
    <li><a href="/sortdown">Lowest</a></li>
    <li><a href="/">Most Recent</a></li>    
  </nav>

  <form>  
    <div class="form-group">
      <label for="exampleFormControlSelect1">Search By Category</label>
      <select class="form-control" id="exampleFormControlSelect1">
        <% if (recipe) { %> <% recipe.forEach(recipe => { %>
        <option><%= recipe.category %> </option>        
        <% }) %> 
      </select>
    </div>
  </form>  
        <% } else { %>
        <p>There are no Categories</p>
        <% } %>
  <div>
    <% if (recipe.length > 0) { %> <% recipe.forEach(recipe => { %>
    <a class="single" href="/recipes/<%= recipe._id %>">
    <h3 class="recipe-name"><%= recipe.name %>            
    <div class="details content">   
      <ul class="rating" data-currentrecipe = "<%= recipe._id %> "data-startrate="<%=   recipe.rating %>"> 
         <% for( let index = 0; index < Number(recipe.rating); index++ ) { %>            
              <li class="rating-item"></li>           
         <% } %>
      </ul>
    </div>   
      </h3>
      <h4 class="recipe-date">Created: <%= recipe.createdAt.toLocaleString() %> </h4>    
      <h4 class="recipe-date">Last Edit: <%= recipe.updatedAt.toLocaleString() %></h4>    
      <ul>
        <% if (recipe.ingredients.length > 0) { %> <% recipe.ingredients.forEach(ingredient => { %>
        <% if (ingredient) { %>            
          <li><%=ingredient %></li>
            <%}  %>    
            <% }) %> <% } else { %>
          <p>Add some Ingredients</p>
            <% } %>      
       </ul>    
      <p class="recipe-directions"><h2>Directions:</h2> <%= recipe.directions %></p>
      </a>
      <% }) %> <% } else { %>
      <p>There are no recipes to display...</p>
      <% } %>
    </div>
    <%- include("./partials/footer.ejs") %>
     <script>
       const sortByStars= ()=>{
         console.log('clicked')
         const endpoint = `/sort`
          console.log(endpoint);         
       }
     </script>
  </body>
</html>
